{% comment %}
  Section: BUYERS ONLY access gate (code entry)
{% endcomment %}

<section class="buyers-only-access" data-buyers-only>
  <div class="buyers-only-access-bg"{% if section.settings.background_image != blank %} style="background-image: url('{{ section.settings.background_image | image_url: width: 2000 }}');"{% endif %}>
    <div class="buyers-only-access-overlay" style="opacity: {{ section.settings.overlay_opacity | divided_by: 100.0 }};"></div>
    <div class="buyers-only-access-inner container mx-auto px-4">
      <div class="buyers-only-access-card">
        <h1 class="buyers-only-access-title font-serif">{{ section.settings.heading | default: 'BUYERS ONLY' }}</h1>
        <p class="buyers-only-access-description">{{ section.settings.description | default: 'Cette section est réservée. Entrez votre code d’accès pour continuer.' }}</p>

        <form class="buyers-only-access-form" data-buyers-only-form>
          <label class="block text-sm font-medium mb-2" for="buyers-only-code">Code d’accès</label>
          <input
            id="buyers-only-code"
            name="buyers-only-code"
            type="password"
            class="input bg-background w-full"
            autocomplete="one-time-code"
            required
          >
          <p class="text-xs text-red-600 mt-2 hidden" data-buyers-only-error>
            Code incorrect. Veuillez réessayer.
          </p>

          <button type="submit" class="btn btn-default w-full h-12 mt-4">
            Accéder
          </button>
        </form>

        <div class="text-xs text-muted-foreground mt-6">
          <a href="{{ routes.root_url }}" class="underline">Retour à l’accueil</a>
        </div>

        <div
          data-buyers-only-config
          data-buyers-only-redirect-url="{{ section.settings.redirect_url | default: '/collections/buyers-only' }}"
          data-buyers-only-code="{{ section.settings.access_code }}"
        ></div>
      </div>
    </div>
  </div>
</section>

{% schema %}
{
  "name": "BUYERS ONLY Access",
  "settings": [
    {
      "type": "image_picker",
      "id": "background_image",
      "label": "Image de fond"
    },
    {
      "type": "range",
      "id": "overlay_opacity",
      "label": "Opacité de l’overlay",
      "min": 0,
      "max": 90,
      "step": 5,
      "default": 55,
      "unit": "%"
    },
    {
      "type": "text",
      "id": "heading",
      "label": "Titre",
      "default": "BUYERS ONLY"
    },
    {
      "type": "textarea",
      "id": "description",
      "label": "Texte",
      "default": "Cette section est réservée. Entrez votre code d’accès pour continuer."
    },
    {
      "type": "text",
      "id": "access_code",
      "label": "Code d’accès",
      "default": "Buyer4Slow11-5!"
    },
    {
      "type": "url",
      "id": "redirect_url",
      "label": "URL de redirection après succès"
    }
  ],
  "presets": [
    {
      "name": "BUYERS ONLY Access",
      "category": "Text"
    }
  ]
}
{% endschema %}
