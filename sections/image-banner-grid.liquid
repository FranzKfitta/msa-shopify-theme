{% schema %}
{
  "name": "Image Banner Grid",
  "settings": [
    {
      "type": "select",
      "id": "layout_mode",
      "label": "Layout",
      "default": "two",
      "options": [
        { "value": "two", "label": "Two images" },
        { "value": "single", "label": "Single full-width image" }
      ]
    },
    {
      "type": "header",
      "content": "Block 1"
    },
    {
      "type": "image_picker",
      "id": "image_1",
      "label": "Image 1"
    },
    {
      "type": "text",
      "id": "heading_1",
      "label": "Heading 1",
      "default": "Collaboration"
    },
    {
      "type": "url",
      "id": "link_1",
      "label": "Link 1"
    },
    {
      "type": "header",
      "content": "Block 2"
    },
    {
      "type": "image_picker",
      "id": "image_2",
      "label": "Image 2"
    },
    {
      "type": "text",
      "id": "heading_2",
      "label": "Heading 2",
      "default": "New arrivals"
    },
    {
      "type": "url",
      "id": "link_2",
      "label": "Link 2"
    },
    {
      "type": "header",
      "content": "Section Settings"
    },
    {
      "type": "range",
      "id": "padding_top",
      "label": "Padding Top",
      "min": 0,
      "max": 100,
      "step": 4,
      "default": 40
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "label": "Padding Bottom",
      "min": 0,
      "max": 100,
      "step": 4,
      "default": 40
    },
    {
      "type": "header",
      "content": "Heading Style"
    },
    {
      "type": "range",
      "id": "heading_font_size",
      "label": "Heading font size (px)",
      "min": 16,
      "max": 64,
      "step": 1,
      "default": 32
    },
    {
      "type": "select",
      "id": "heading_font_weight",
      "label": "Heading font weight",
      "default": "700",
      "options": [
        { "value": "400", "label": "Normal" },
        { "value": "500", "label": "Medium" },
        { "value": "600", "label": "Semibold" },
        { "value": "700", "label": "Bold" }
      ]
    },
    {
      "type": "color",
      "id": "heading_1_color",
      "label": "Heading 1 color",
      "default": "#ffffff"
    },
    {
      "type": "color",
      "id": "heading_2_color",
      "label": "Heading 2 color",
      "default": "#ffffff"
    },
    {
      "type": "select",
      "id": "heading_1_position",
      "label": "Heading 1 position",
      "default": "center_center",
      "options": [
        { "value": "top_left", "label": "Top left" },
        { "value": "top_center", "label": "Top center" },
        { "value": "top_right", "label": "Top right" },
        { "value": "middle_left", "label": "Middle left" },
        { "value": "center_center", "label": "Middle center" },
        { "value": "middle_right", "label": "Middle right" },
        { "value": "bottom_left", "label": "Bottom left" },
        { "value": "bottom_center", "label": "Bottom center" },
        { "value": "bottom_right", "label": "Bottom right" }
      ]
    },
    {
      "type": "select",
      "id": "heading_2_position",
      "label": "Heading 2 position",
      "default": "center_center",
      "options": [
        { "value": "top_left", "label": "Top left" },
        { "value": "top_center", "label": "Top center" },
        { "value": "top_right", "label": "Top right" },
        { "value": "middle_left", "label": "Middle left" },
        { "value": "center_center", "label": "Middle center" },
        { "value": "middle_right", "label": "Middle right" },
        { "value": "bottom_left", "label": "Bottom left" },
        { "value": "bottom_center", "label": "Bottom center" },
        { "value": "bottom_right", "label": "Bottom right" }
      ]
    }
  ],
  "presets": [
    {
      "name": "Image Banner Grid"
    }
  ]
}
{% endschema %}

{%- liquid
  assign padding_top = section.settings.padding_top | default: 40
  assign padding_bottom = section.settings.padding_bottom | default: 40
  assign layout_mode = section.settings.layout_mode | default: 'two'
-%}

<section class="w-full" style="padding-top: {{ padding_top }}px; padding-bottom: {{ padding_bottom }}px;" data-section-id="{{ section.id }}">
  {% if layout_mode == 'single' %}
    <div class="px-4 md:px-6">
      {%- if section.settings.image_1 != blank or section.settings.heading_1 != blank -%}
        <div class="w-full relative">
          {%- if section.settings.link_1 != blank -%}
            <a href="{{ section.settings.link_1 }}" class="block w-full">
          {%- else -%}
            <div class="block w-full">
          {%- endif -%}
            <div class="relative w-full overflow-hidden" style="aspect-ratio: 1.7777777777777777; background-color: #ffffff;">
              {%- if section.settings.image_1 != blank -%}
                <img
                  src="{{ section.settings.image_1 | image_url: width: 2000 }}"
                  srcset="{{ section.settings.image_1 | image_url: width: 800 }} 800w,
                          {{ section.settings.image_1 | image_url: width: 1200 }} 1200w,
                          {{ section.settings.image_1 | image_url: width: 1600 }} 1600w,
                          {{ section.settings.image_1 | image_url: width: 2000 }} 2000w"
                  sizes="100vw"
                  alt="{{ section.settings.heading_1 | escape }}"
                  class="w-full h-full object-contain"
                  loading="lazy"
                  width="{{ section.settings.image_1.width }}"
                  height="{{ section.settings.image_1.height }}"
                >
              {%- else -%}
                <div class="w-full h-full bg-gray-200 flex items-center justify-center">
                  <span class="text-gray-400 text-sm">Image 1</span>
                </div>
              {%- endif -%}

              {%- if section.settings.heading_1 != blank -%}
                {%- liquid
                  assign h1_position = section.settings.heading_1_position | default: 'center_center'

                  case h1_position
                    when 'top_left'
                      assign h1_items = 'items-start'
                      assign h1_justify = 'justify-start'
                    when 'top_center'
                      assign h1_items = 'items-start'
                      assign h1_justify = 'justify-center'
                    when 'top_right'
                      assign h1_items = 'items-start'
                      assign h1_justify = 'justify-end'
                    when 'middle_left'
                      assign h1_items = 'items-center'
                      assign h1_justify = 'justify-start'
                    when 'center_center'
                      assign h1_items = 'items-center'
                      assign h1_justify = 'justify-center'
                    when 'middle_right'
                      assign h1_items = 'items-center'
                      assign h1_justify = 'justify-end'
                    when 'bottom_left'
                      assign h1_items = 'items-end'
                      assign h1_justify = 'justify-start'
                    when 'bottom_center'
                      assign h1_items = 'items-end'
                      assign h1_justify = 'justify-center'
                    when 'bottom_right'
                      assign h1_items = 'items-end'
                      assign h1_justify = 'justify-end'
                  endcase
                -%}
                <div class="absolute inset-0 flex pointer-events-none {{ h1_items }} {{ h1_justify }}">
                  <h2
                    class="image-banner-heading"
                    style="font-size: {{ section.settings.heading_font_size | default: 32 }}px; font-weight: {{ section.settings.heading_font_weight | default: 700 }}; color: {{ section.settings.heading_1_color | default: '#ffffff' }};"
                  >
                    {{ section.settings.heading_1 }}
                  </h2>
                </div>
              {%- endif -%}
            </div>
          {%- if section.settings.link_1 != blank -%}
            </a>
          {%- else -%}
            </div>
          {%- endif -%}
        </div>
      {%- endif -%}
    </div>
  {% else %}
    <div class="flex flex-col md:flex-row gap-4 px-4 md:px-6">
      <!-- Block 1 -->
      {%- if section.settings.image_1 != blank or section.settings.heading_1 != blank -%}
        <div class="flex-1 relative">
          {%- if section.settings.link_1 != blank -%}
            <a href="{{ section.settings.link_1 }}" class="block w-full">
          {%- else -%}
            <div class="block w-full">
          {%- endif -%}
            <div class="relative w-full overflow-hidden" style="aspect-ratio: 0.6666666666666666;">
              {%- if section.settings.image_1 != blank -%}
                <img
                  src="{{ section.settings.image_1 | image_url: width: 1200 }}"
                  srcset="{{ section.settings.image_1 | image_url: width: 600 }} 600w,
                          {{ section.settings.image_1 | image_url: width: 900 }} 900w,
                          {{ section.settings.image_1 | image_url: width: 1200 }} 1200w"
                  sizes="(max-width: 768px) 100vw, 50vw"
                  alt="{{ section.settings.heading_1 | escape }}"
                  class="w-full h-full object-cover"
                  loading="lazy"
                  width="{{ section.settings.image_1.width }}"
                  height="{{ section.settings.image_1.height }}"
                >
              {%- else -%}
                <div class="w-full h-full bg-gray-200 flex items-center justify-center">
                  <span class="text-gray-400 text-sm">Image 1</span>
                </div>
              {%- endif -%}
              
              <!-- Heading -->
              {%- if section.settings.heading_1 != blank -%}
                {%- liquid
                  assign h1_position = section.settings.heading_1_position | default: 'center_center'

                  case h1_position
                    when 'top_left'
                      assign h1_items = 'items-start'
                      assign h1_justify = 'justify-start'
                    when 'top_center'
                      assign h1_items = 'items-start'
                      assign h1_justify = 'justify-center'
                    when 'top_right'
                      assign h1_items = 'items-start'
                      assign h1_justify = 'justify-end'
                    when 'middle_left'
                      assign h1_items = 'items-center'
                      assign h1_justify = 'justify-start'
                    when 'center_center'
                      assign h1_items = 'items-center'
                      assign h1_justify = 'justify-center'
                    when 'middle_right'
                      assign h1_items = 'items-center'
                      assign h1_justify = 'justify-end'
                    when 'bottom_left'
                      assign h1_items = 'items-end'
                      assign h1_justify = 'justify-start'
                    when 'bottom_center'
                      assign h1_items = 'items-end'
                      assign h1_justify = 'justify-center'
                    when 'bottom_right'
                      assign h1_items = 'items-end'
                      assign h1_justify = 'justify-end'
                  endcase
                -%}
                <div class="absolute inset-0 flex pointer-events-none {{ h1_items }} {{ h1_justify }}">
                  <h2
                    class="image-banner-heading"
                    style="font-size: {{ section.settings.heading_font_size | default: 32 }}px; font-weight: {{ section.settings.heading_font_weight | default: 700 }}; color: {{ section.settings.heading_1_color | default: '#ffffff' }};"
                  >
                    {{ section.settings.heading_1 }}
                  </h2>
                </div>
              {%- endif -%}
            </div>
          {%- if section.settings.link_1 != blank -%}
            </a>
          {%- else -%}
            </div>
          {%- endif -%}
        </div>
      {%- endif -%}

      <!-- Block 2 -->
      {%- if section.settings.image_2 != blank or section.settings.heading_2 != blank -%}
        <div class="flex-1 relative">
          {%- if section.settings.link_2 != blank -%}
            <a href="{{ section.settings.link_2 }}" class="block w-full">
          {%- else -%}
            <div class="block w-full">
          {%- endif -%}
            <div class="relative w-full overflow-hidden" style="aspect-ratio: 0.6629392971246006;">
              {%- if section.settings.image_2 != blank -%}
                <img
                  src="{{ section.settings.image_2 | image_url: width: 1200 }}"
                  srcset="{{ section.settings.image_2 | image_url: width: 600 }} 600w,
                          {{ section.settings.image_2 | image_url: width: 900 }} 900w,
                          {{ section.settings.image_2 | image_url: width: 1200 }} 1200w"
                  sizes="(max-width: 768px) 100vw, 50vw"
                  alt="{{ section.settings.heading_2 | escape }}"
                  class="w-full h-full object-cover"
                  loading="lazy"
                  width="{{ section.settings.image_2.width }}"
                  height="{{ section.settings.image_2.height }}"
                >
              {%- else -%}
                <div class="w-full h-full bg-gray-200 flex items-center justify-center">
                  <span class="text-gray-400 text-sm">Image 2</span>
                </div>
              {%- endif -%}
              
              <!-- Heading -->
              {%- if section.settings.heading_2 != blank -%}
                {%- liquid
                  assign h2_position = section.settings.heading_2_position | default: 'center_center'

                  case h2_position
                    when 'top_left'
                      assign h2_items = 'items-start'
                      assign h2_justify = 'justify-start'
                    when 'top_center'
                      assign h2_items = 'items-start'
                      assign h2_justify = 'justify-center'
                    when 'top_right'
                      assign h2_items = 'items-start'
                      assign h2_justify = 'justify-end'
                    when 'middle_left'
                      assign h2_items = 'items-center'
                      assign h2_justify = 'justify-start'
                    when 'center_center'
                      assign h2_items = 'items-center'
                      assign h2_justify = 'justify-center'
                    when 'middle_right'
                      assign h2_items = 'items-center'
                      assign h2_justify = 'justify-end'
                    when 'bottom_left'
                      assign h2_items = 'items-end'
                      assign h2_justify = 'justify-start'
                    when 'bottom_center'
                      assign h2_items = 'items-end'
                      assign h2_justify = 'justify-center'
                    when 'bottom_right'
                      assign h2_items = 'items-end'
                      assign h2_justify = 'justify-end'
                  endcase
                -%}
                <div class="absolute inset-0 flex pointer-events-none {{ h2_items }} {{ h2_justify }}">
                  <h2
                    class="image-banner-heading"
                    style="font-size: {{ section.settings.heading_font_size | default: 32 }}px; font-weight: {{ section.settings.heading_font_weight | default: 700 }}; color: {{ section.settings.heading_2_color | default: '#ffffff' }};"
                  >
                    {{ section.settings.heading_2 }}
                  </h2>
                </div>
              {%- endif -%}
            </div>
          {%- if section.settings.link_2 != blank -%}
            </a>
          {%- else -%}
            </div>
          {%- endif -%}
        </div>
      {%- endif -%}
    </div>
  {% endif %}
</section>