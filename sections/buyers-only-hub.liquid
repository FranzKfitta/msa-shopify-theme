<section class="buyers-only-hub" data-buyers-only-page-guard data-buyers-only-gate-url="{{ section.settings.gate_url | default: '/pages/buyers-only' }}" style="--animation-duration: {{ section.settings.animation_duration | default: 600 }}ms; --grayscale-intensity: {{ section.settings.grayscale_intensity | default: 100 }}%;">
  <div class="buyers-only-hub__container">
    {%- for block in section.blocks -%}
      {%- if block.type == 'card' -%}
        <div class="buyers-only-hub__card" {{ block.shopify_attributes }}>
          {%- if block.settings.background_image != blank -%}
            <div class="buyers-only-hub__card-bg" style="background-image: url('{{ block.settings.background_image | image_url: width: 2400 }}');"></div>
          {%- else -%}
            <div class="buyers-only-hub__card-bg" style="background-color: #f5f5f5;"></div>
          {%- endif -%}
          <div class="buyers-only-hub__card-overlay" style="opacity: {{ block.settings.overlay_opacity | divided_by: 100.0 }};"></div>
          <div class="buyers-only-hub__card-content">
            <h2 class="buyers-only-hub__card-heading font-serif" style="font-size: {{ block.settings.heading_font_size | default: 3.5 }}rem;">{{ block.settings.heading | default: 'Card ' | append: forloop.index }}</h2>
            {%- if block.settings.button_text != blank -%}
              {%- if block.settings.button_url != blank -%}
                <a href="{{ block.settings.button_url }}" class="buyers-only-hub__card-btn buyers-only-hub__card-btn--{{ block.settings.button_size | default: 'medium' }} btn btn-default">{{ block.settings.button_text }}</a>
              {%- else -%}
                <button class="buyers-only-hub__card-btn buyers-only-hub__card-btn--{{ block.settings.button_size | default: 'medium' }} btn btn-default" type="button">{{ block.settings.button_text }}</button>
              {%- endif -%}
            {%- endif -%}
          </div>
        </div>
      {%- endif -%}
    {%- endfor -%}
  </div>
</section>

{% schema %}
{
  "name": "BUYERS ONLY Hub",
  "settings": [
    {
      "type": "text",
      "id": "gate_url",
      "label": "Gate page URL",
      "default": "/pages/buyers-only"
    },
    {
      "type": "range",
      "id": "animation_duration",
      "label": "Animation duration (ms)",
      "min": 300,
      "max": 1200,
      "step": 100,
      "default": 600,
      "unit": "ms"
    },
    {
      "type": "range",
      "id": "grayscale_intensity",
      "label": "Grayscale intensity",
      "min": 0,
      "max": 100,
      "step": 10,
      "default": 100,
      "unit": "%"
    }
  ],
  "blocks": [
    {
      "type": "card",
      "name": "Card",
      "settings": [
        {
          "type": "image_picker",
          "id": "background_image",
          "label": "Background image"
        },
        {
          "type": "range",
          "id": "overlay_opacity",
          "label": "Overlay opacity",
          "min": 0,
          "max": 90,
          "step": 5,
          "default": 40,
          "unit": "%"
        },
        {
          "type": "text",
          "id": "heading",
          "label": "Heading"
        },
        {
          "type": "range",
          "id": "heading_font_size",
          "label": "Heading font size",
          "min": 1.5,
          "max": 6,
          "step": 0.5,
          "default": 3.5,
          "unit": "rem"
        },
        {
          "type": "text",
          "id": "button_text",
          "label": "Button text",
          "default": "Explore"
        },
        {
          "type": "select",
          "id": "button_size",
          "label": "Button size",
          "options": [
            { "value": "small", "label": "Small" },
            { "value": "medium", "label": "Medium" },
            { "value": "large", "label": "Large" }
          ],
          "default": "medium"
        },
        {
          "type": "url",
          "id": "button_url",
          "label": "Button URL"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "BUYERS ONLY Hub",
      "category": "Text",
      "blocks": [
        { "type": "card" },
        { "type": "card" },
        { "type": "card" },
        { "type": "card" }
      ]
    }
  ]
}
{% endschema %}
